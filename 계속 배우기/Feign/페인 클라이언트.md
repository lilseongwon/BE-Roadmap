Feign Clientë€â“
ìŠ¤í”„ë§ í™˜ê²½ì—ì„œ ê°„í¸í•˜ê²Œ ì™¸ë¶€ apië¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.
ë„·í”Œë¦­ìŠ¤ì—ì„œ ë§Œë“¤ì–´ì¡Œë‹¤

RestTemplateë‘ ê°™ì€ê±° ì•„ë‹˜?ğŸ¤”
feign clientëŠ” interfaceë§Œ ë§Œë“¤ê³  ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ErrorDecoderë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆë‹¤.

restTemplateë„ feignê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Http í†µì‹ ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆëŠ” í…œí”Œì¸ë°, ì½”ë“œë¥¼ ì§ì ‘ ë³´ë©´ ë‘˜ì˜ í™•ì—°í•œ ì°¨ì´ê°€ ëŠê»´ì§ˆ ê²ƒì´ë‹¤.

RestTemplate
@RequiredArgsConstructor
@Service
public class RestTemplateExample {
    private final RestTemplate restTemplate = new RestTemplate();
    private final String CLIENT_ID = "í´ë¼ì´ì–¸íŠ¸ID";
    private final String CLIENT_SECRET = "í´ë¼ì´ì–¸íŠ¸ secret";

    public Dto requestBook(String keyword) {
        final HttpHeaders headers = new HttpHeaders();
        URI uri = UriComponentsBuilder
                .fromUriString("https://openapi.naver.com/v1/search/book.json")
                .queryParam("query", keyword)
                .encode()
                .build()
                .toUri();
        headers.set("X-Naver-Client-Id", CLIENT_ID);
        headers.set("X-Naver-Client-Secret", CLIENT_SECRET);

        final HttpEntity<String> entity = new HttpEntity<>(headers);
        return restTemplate.exchange(uri, HttpMethod.GET, entity, Dto.class).getBody();
    }
}
Feign
@RequiredArgsConstructor
@FeignClient(url = "https://openapi.naver.com/v1/search/book.json")
public interface FeignExample {

    private final String CLIENT_ID = "í´ë¼ì´ì–¸íŠ¸ID";
    private final String CLIENT_SECRET = "í´ë¼ì´ì–¸íŠ¸ secret";

    @GetMapping
    public Dto getBook(@RequestHeader("X-Naver-Client-Id")String client_id,
                       @RequestHeader("X-Naver-Client-Secret") String secret,
                       @RequestParam("query")String keyword);
}
ì½”ë“œê°€ í›¨ì”¬ ì¶•ì†Œëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì‘ë™ì›ë¦¬

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ feignì´ ë§¤í•‘ëœ urlë¡œ ìš”ì²­ì„ ë°›ìœ¼ë©´, í†µì‹ í•  urlì— ì •í•´ì§„ ë©”ì†Œë“œë¡œ ìš”ì²­ì„ ë³´ë‚¸ ë’¤, ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

ì •ë¦¬
feignì€ HTTPí†µì‹ ì— ë§¤ìš° í¸ë¦¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤. ì†Œì…œ ë¡œê·¸ì¸(oauth)ê³¼ì •ì—ì„œ ê°„í¸íˆ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , ì´ì™¸ì˜ ë‹¤ë¥¸ api ì„œë²„ì˜ í†µì‹ ì´ í•„ìš”í•  ë•Œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

### ì›ë³¸
https://velog.io/@lilseongwon/feign%EC%9D%80-%EB%B3%B4%EA%B3%A0-%EA%B0%80%EC%95%BC%EC%A7%80-%EB%AD%90%EA%B0%80-%EA%B7%B8%EB%A0%87%EA%B2%8C-%EA%B8%89%ED%95%B4
(ë³¸ì¸ ë²¨ë¡œê·¸)
